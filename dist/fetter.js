!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("lodash/isFunction"),require("lodash/isArrayLikeObject"),require("lodash/isPlainObject"),require("lodash/isNumber"),require("lodash/isBoolean"),require("lodash/isString"),require("lodash/isDate")):"function"==typeof define&&define.amd?define(["lodash/isFunction","lodash/isArrayLikeObject","lodash/isPlainObject","lodash/isNumber","lodash/isBoolean","lodash/isString","lodash/isDate"],e):t.fetter=e(t.isFunction,t.isArrayLikeObject,t.isPlainObject,t.isNumber,t.isBoolean,t.isString,t.isDate)}(this,function(t,e,r,n,o,i,u){"use strict";function s(t,n){if(void 0===n&&(n=!0),t){if(t.fetter)return s(t.value);if(e(t)&&n)return t.map(function(t){return s(t)});if(r(t)&&n){for(var o=Object.getOwnPropertyNames(t),i=t,u=0;u<o.length;u+=1)i[o[u]]=s(t[o[u]]);return i}}return t}function a(t,e){return function(){for(var r=[],n=arguments.length;n--;)r[n]=arguments[n];return new t(e.apply(s(this.value),s(r)))}}function c(t,e){return e.strictCheck(t)}function p(t,e){if(!c(t,e)){var r;throw r=t.typeName?t.typeName:typeof t,new Error("Expected type "+(new e).typeName+", got "+r)}}function h(t,e){return t&&!t.fetter?new e(t):t}t="default"in t?t.default:t,e="default"in e?e.default:e,r="default"in r?r.default:r,n="default"in n?n.default:n,o="default"in o?o.default:o,i="default"in i?i.default:i,u="default"in u?u.default:u;var f=function(t,e,r){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o+=1){if("toString"===n[o])throw new Error("toString cannot be used with Fetter's autoDefine!");t[n[o]]=a(e[n[o]],r[n[o]]),t[n[o]].bind(t)}},l=function(e,r,n,o,i){var u=this;if(void 0===r&&(r="Class"),void 0===n&&(n={}),this.typeName=r,this.extra=n,this.fetter=!0,this.watchers=[],this.set(e),i&&f(this,i,o.prototype),o)for(var a=Object.getOwnPropertyNames(o.prototype),c=function(e){"arguments"!==a[e]&&"caller"!==a[e]&&!u[a[e]]&&t(o.prototype[a[e]])&&(u[a[e]]=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return u._value[a[e]](t.map(function(t){return s(t)}))})},p=0;p<a.length;p+=1)c(p)},y={value:{}};y.value.get=function(){return this.get()},y.value.set=function(t){this.set(t)},l.prototype.check=function(){return!0},l.strictCheck=function(){return this.check()},l.prototype.get=function(){return this._value},l.prototype.setValue=function(t){var e=this,r=this._value;this._value=t;for(var n=0;n<this.watchers.length;n+=1)e.watchers[n](r,t)},l.prototype.set=function(t){if(!this.check(t))throw new Error("Value is not of type "+this.typeName);this.setValue(s(t))},l.prototype.watch=function(t){this.watchers.push(s(t))},l.prototype.unwatch=function(){this.watchers=this.watchers.splice(1)},Object.defineProperties(l.prototype,y);var v=function(t){function e(e,r,n,o){t.call(this,e,r,{checker:n},o)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.check=function(t){return this.extra.checker(t)||t&&t.value&&this.extra.checker(t.value)},e}(l),w=function(t){function e(e){t.call(this,s(e),"Any")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(l),d=function(t){function e(e){void 0===e&&(e=""),t.call(this,s(e),"String",function(t){return i(s(t))})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(v),g=function(t){function e(e){void 0===e&&(e=!1),t.call(this,s(e),"Boolean",function(){return!0},Boolean)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.strictCheck=function(t){return o(s(t))},e.prototype.set=function(t){return this.setValue(Boolean(t)),this._value},e.prototype.toString=function(){return new d(""+this._value)},e.prototype.valueOf=function(){return this._value},e}(v),_=function(t){function e(e){void 0===e&&(e=0),t.call(this,s(e),"Number",function(t){return n(s(t))})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(v),b=function(t){function r(e,n){void 0===e&&(e=[]),void 0===n&&(n=w),t.call(this,s(e),"Array",{subtype:new n,SubtypeConstructor:n,makeError:function(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];for(var n="",o=0;o<e.length;o+=1)n+=JSON.stringify(e[o])+",";return n=n.replace(/,$/,""),new Error("Value "+n+" is not of type Array or "+this.subtype.typeName+" (In f.Array."+t+")")}},Array,{indexOf:_,join:d,lastIndexOf:_,slice:r,toLocaleString:d})}t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r;var o={length:{}};return r.prototype.check=function(t){var r=this,n=s(t);if(!e(n))return!1;for(var o=0;o<n.length;o+=1)if(!r.extra.subtype.check(n[o]))return!1;return!0},r.prototype.get=function(t){return n(t)?this._value[t]:this._value},r.prototype.set=function(t){var e=this,r=s(t);if(t)if(this.check(r))this.setValue(r.map(function(t){return h(t,e.extra.SubtypeConstructor)}));else{if(!n(r))throw this.extra.makeError("set",t);this.setValues(new Array(r))}else this.setValue([])},o.length.get=function(){return new _(this._value.length)},r.prototype.copyWithin=function(t,e,n){return new r(this._value.copyWithin(s(t),s(e),s(n)))},r.prototype.fill=function(t,e,n){if(this.extra.subtype.check(t))return new r(this._value.fill(h(t,this.extra.SubtypeConstructor),s(e),s(n)));throw this.extra.makeError("fill",t,e,n)},r.prototype.push=function(){for(var t=this,e=[],r=arguments.length;r--;)e[r]=arguments[r];if(this.check(e)){for(var n,o=0;o<e.length;o+=1)n=t._value.push(h(e[o],t.extra.SubtypeConstructor));return n}throw this.extra.makeError("push",e)},r.prototype.sort=function(t){return void 0===t&&(t=function(t,e){return String(t)<String(e)?-1:t===e?0:1}),this._value=this._value.sort(function(e,r){return t(s(e),s(r))}),this._value},r.prototype.splice=function(t,e){for(var n=this,o=[],i=arguments.length-2;i-- >0;)o[i]=arguments[i+2];var u=s(t),a=s(e),c=o.map(function(t){return h(t,n.extra.SubtypeConstructor)});if(c.length>0){if(this.check(c)){for(var p=new r,f=0;f<a;f+=1)p.push(n._value.splice(u,1)[0]);for(var l=c.reverse(),y=0;y<l.length;y+=1)n._value.splice(u,0,l[y]);return p}throw this.makeError("splice",u,a,c)}return new r(this._value.splice(u,a),this.extra.SubtypeConstructor)},r.prototype.unshift=function(){for(var t=this,e=[],n=arguments.length;n--;)e[n]=arguments[n];var o=e.map(function(e){return h(e,t.extra.SubtypeConstructor)});if(0===o.length)return new r(this._value.unshift());if(this.check(o)){for(var i=o.reverse(),u=0;u<i.length;u+=1)t._value.unshift(i[u]);return new _(this._value.length)}throw this.extra.makeError("unshift",o)},r.prototype.concat=function(){for(var t=this,e=[],n=arguments.length;n--;)e[n]=arguments[n];for(var o=new r(this._value,this.extra.SubtypeConstructor),i=0;i<e.length;i+=1){if(!t.check(e[i]))throw t.extra.makeError("concat",e);o.value=o.value.concat(s(e[i]))}return o},r.prototype.includes=function(t,e){var r=this;void 0===e&&(e=0);for(var n=h(t,this.extra.SubtypeConstructor),o=s(e),i=o;i<this.length.value;i+=1)if(s(r.get(i))===s(n))return new g(!0);return new g(!1)},r.prototype.toString=function(){return new d(this._value.map(function(t){return s(t)}).toString())},Object.defineProperties(r.prototype,o),r}(l);b.from=function(t,e,r){return new b(Array.from(s(t),s(e),s(r)))},b.isArray=function(t){return new g(Array.isArray(s(t)))},b.of=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new b(t)};var O=function(t){function e(e,r,n,o,i,u,a){void 0===e&&(e=new Date),void 0===r&&(r=0),void 0===n&&(n=1),void 0===o&&(o=0),void 0===i&&(i=0),void 0===u&&(u=0),void 0===a&&(a=0),t.call(this,s(e),"Date",{month:s(r),day:s(n),hours:s(o),minutes:s(i),seconds:s(u),milliseconds:s(a)},Date,{toDateString:d})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.check=function(t){return u(s(t))},e.prototype.set=function(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];if(this.check(t))this.setValue(t);else if(i(t))this.setValue(new Date(t));else if(e.length>0)this.setValue(new Date(t,e));else{if(!n(this.extra.month))throw new Error("Value is not of type "+this.typeName+" or String");this._value=new Date(t,this.extra.month,this.extra.day,this.extra.hours,this.extra.minutes,this.extra.seconds,this.extra.milliseconds),this.extra={}}},e.now=function(){return new _(Date.now())},e.parse=function(t){return new _(Date.parse(s(t)))},e.UTC=function(t,e,r,n,o,i,u){return void 0===r&&(r=1),void 0===n&&(n=0),void 0===o&&(o=0),void 0===i&&(i=0),void 0===u&&(u=0),new _(Date.UTC(s(t),s(e),s(r),s(n),s(o),s(i),s(u)))},e.prototype.toLocaleString=function(t,e){return new d(this._value.toLocaleString(s(t),s(e)))},e.prototype.toString=function(){return new d(this._value.toString())},e}(l),m=function(e){function r(r){void 0===r&&(r=function(){}),e.call(this,s(r),"Function",function(e){return t(s(e))},Function)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.apply=function(t){return(e=this)._value.apply(e,s(t));var e},r.prototype.bind=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return new r(this._value.bind(t,e))},r.prototype.call=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return this.apply(t)},r}(v),j=function(e){function n(t){void 0===t&&(t={}),e.call(this,s(t,!1),"Object",{},Object)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.check=function(t){return r(s(JSON.parse(JSON.stringify(t))))},n.prototype.get=function(t){return t?this._value[s(t)]:this._value},n.prototype.set=function(e,r){var n=this,o=s(e,!1);if(r){var i;i=t(s(r))?new m(s(r)).bind(this):r.fetter?r:new w(r),"undefined"==typeof this._value[o]?this._value[o]=i:this._value[o].set(i)}else{if(!this.check(o))throw new Error("Value is not of type Object");this.setValue({});for(var u=Object.getOwnPropertyNames(o),a=0;a<u.length;a+=1)n.set(u[a],o[u[a]])}},n.assign=function(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return new n(Object.assign.apply(this,[s(t)].concat(e.map(function(t){return s(t)}))))},n.defineProperty=function(t,e,r){var o=s(r);return o.writable=!0,new n(Object.defineProperty(s(t),s(e),o))},n.defineProperties=function(t,e){for(var r=s(e),o=Object.getOwnPropertyNames(r),i=0;i<o.length;i+=1)r[o[i]].writable=!0;return new n(Object.defineProperties(s(t),r))},n.getPrototypeOf=function(){throw new Error("Object.getPrototypeOf is not currently supported by Fetter.")},n.is=function(t,e){return new g(Object.is(s(t),s(e)))},n.isFrozen=function(t){return new g(t.fetter?Object.isFrozen(t.value):Object.isFrozen(t))},n.setPrototypeOf=function(){throw new Error("Object.setPrototypeOf is not currently supported by Fetter.")},n.prototype.hasOwnProperty=function(t){return new g(Object.prototype.hasOwnProperty.call(this._value,s(t)))},n.prototype.isPrototypeOf=function(){throw new Error("Object.isPrototypeOf is not currently supported by Fetter")},n.prototype.toLocaleString=function(){return new d(this._value.toLocaleString())},n.prototype.toString=function(){return new d(this._value.toString())},n.prototype.valueOf=function(){return this.value},n.prototype.watch=function(t,e){this._value[s(t)].watch(s(e))},n.prototype.unwatch=function(t){this._value[s(t)].unwatch()},n}(l);f(j,{create:j,entries:b,freeze:j,getOwnPropertyDescriptor:j,getOwnPropertyDescriptors:j,getOwnPropertyNames:b,getOwnPropertySymbols:b,isExtensible:g,isSealed:g,keys:b,preventExtensions:j,seal:j,values:b},Object);for(var S={Any:w,Array:b,Boolean:g,Date:O,Function:m,Number:_,Object:j,String:d},k={Class:l,Simple:v,is:c,enforce:p,s:s,convert:h,types:S},x=Object.getOwnPropertyNames(S),P=0;P<x.length;P+=1)k[x[P]]=S[x[P]];return k});